<div class="header-actions">
  <div class="title-group">
    <h1>ðŸ‘¥ Citizens Management</h1>
    <p>View and manage platform users</p>
  </div>
  
  <button mat-raised-button color="primary" (click)="openDialog()">
    <mat-icon>add</mat-icon> New Citizen
  </button>
</div>

<div class="search-container">
  <mat-form-field appearance="outline" class="search-field" subscriptSizing="dynamic">
    <mat-icon matPrefix>search</mat-icon>
    <mat-label>Search by name...</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Mariah Carey">
  </mat-form-field>

  <mat-form-field appearance="outline" class="page-size-select" subscriptSizing="dynamic">
    <mat-label>Records</mat-label>
    <mat-select [value]="pageSize" (selectionChange)="onPageSizeChange($event.value)">
      <mat-option [value]="5">5</mat-option>
      <mat-option [value]="10">10</mat-option>
      <mat-option [value]="20">20</mat-option>
    </mat-select>
  </mat-form-field>
</div>

<div class="table-card">
  <div class="table-responsive">
    <table mat-table [dataSource]="dataSource">

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name & Surname </th>
        <td mat-cell *matCellDef="let user">
          <div class="name-cell">
            <div class="mini-avatar">{{ user.name.charAt(0) }}</div>
            <span class="name-text">{{ user.name }}</span>
          </div>
        </td>
      </ng-container>

      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef> Email </th>
        <td mat-cell *matCellDef="let user"> 
          <span class="email-text">{{ user.email }}</span> 
        </td>
      </ng-container>

      <ng-container matColumnDef="gender">
        <th mat-header-cell *matHeaderCellDef> Gender </th>
        <td mat-cell *matCellDef="let user">
          <span class="gender-pill">
            {{ user.gender === 'male' ? 'ðŸ‘¨ M' : 'ðŸ‘© F' }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef> Status </th>
        <td mat-cell *matCellDef="let user">
          <span class="status-badge" 
                [ngClass]="{'active': user.status === 'active', 'inactive': user.status === 'inactive'}">
            {{ user.status === 'active' ? 'Active' : 'Inactive' }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef class="actions-header"> Actions </th>
        <td mat-cell *matCellDef="let user" (click)="$event.stopPropagation()">
          <div class="action-buttons">
            <button mat-icon-button class="view-btn" [routerLink]="['/users', user.id]" matTooltip="Details">
              <mat-icon>visibility</mat-icon>
            </button>
            <button mat-icon-button class="delete-btn" (click)="deleteUser(user)" matTooltip="Delete">
              <mat-icon>delete_outline</mat-icon>
            </button>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover-row"></tr>
    </table>
  </div>

  <div class="pagination-bar">
    <div class="page-info">Page <strong>{{ currentPage }}</strong></div>
    <div class="nav-buttons">
      <button mat-button [disabled]="currentPage === 1" (click)="changePage(-1)">
        <mat-icon>chevron_left</mat-icon> Previous
      </button>
      <button mat-button (click)="changePage(1)">
        Next <mat-icon>chevron_right</mat-icon>
      </button>
    </div>
  </div>
</div>